// 修复API端点URL（关键修复）
Update(src/options/options.js)
  ⎿ 将错误的端点URL替换为正确的
  @@ -src/options/options.js
  // 找到以下行
  const infoResponse = await safeApiRequest('https://open.feishu.cn/open-apis/authen/v1/access token info', {
  
  // 替换为正确的端点URL
  const infoResponse = await safeApiRequest('https://open.feishu.cn/open-apis/authen/v1/access_token_info', {

// 添加URL验证函数（预防未来错误）
Write(src/utils/url-helper.js)
  +++ src/utils/url-helper.js
  export function validateFeishuUrl(url) {
    const validEndpoints = [
      '/open-apis/auth/v3/tenant_access_token/internal',
      '/open-apis/authen/v1/access_token_info',
      '/open-apis/bitable/v1/apps'
    ];
    
    const isValid = validEndpoints.some(endpoint => url.includes(endpoint));
    
    if (!isValid) {
      console.warn('可疑的飞书API URL:', url);
      throw new Error(`无效的API端点: ${url}`);
    }
    
    return true;
  }

// 在API调用前添加验证
Update(src/options/options.js)
  ⎿ 在safeApiRequest函数中添加验证
  @@ -src/options/options.js
  async function safeApiRequest(url, options = {}, retries = 3) {
    try {
      + // 验证URL格式
      + import { validateFeishuUrl } from '../utils/url-helper';
      + validateFeishuUrl(url);
      
      const response = await fetch(url, options);
      // ... [其余代码] ...
    } catch (error) {
      // ... [错误处理] ...
    }
  }

// 更新构建配置
Update(vite.config.ts)
  ⎿ 确保url-helper.js被包含在构建中
  @@ -vite.config.ts
  build: {
    rollupOptions: {
      input: {
        // ... [其他入口] ...
        + utils: 'src/utils/url-helper.ts'
      }
    }
  }

// 构建并测试
Bash(pnpm build)